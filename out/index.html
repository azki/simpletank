<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<meta name="viewport" content="user-scalable=no, initial-scale=1.0, width=320" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>Simple Tank : tank.azki.org</title>
		<style type="text/css">
html,body {margin:0}
body { font-family:Georgia; }
.panel {margin:5px; border:1px dotted #999; text-align:center;}
address {text-align:right;}
</style>
	</head>
	<body>
		<div id="status" class="panel">
			상태메시지
		</div>
		<div id="hp" class="panel">
			hp
		</div>
		<div id="angle" class="panel">
			angle
		</div>
		<div id="power" class="panel">
			power
		</div>
		<div id="btns" class="panel">
			<button id="move" type="button">move</button>
			<button id="doubleShot" type="button">double shot</button>
			<button id="shot" type="button">normal shot</button>
		</div>
		<address>Simple Tank 0.3.1 by azki( @ azki.org).</address>
		<script type="text/javascript" src="./js/jquery-1.4.1.min.js"></script>
		<script type="text/javascript" src="./js/io.min.js"></script>
		<script type="text/javascript">
/*global $,setTimeout,io4azki*/
"use strict";
$(function () {
	var clientUniq = localStorage.getItem("clientUniq");
	if (!clientUniq) {
		clientUniq = Math.random().toString(36).substr(2);
		localStorage.setItem("clientUniq", clientUniq);
	}
	
	var nickName = localStorage.getItem("nickName");
	while (!nickName) {
		nickName = prompt("닉네임을 입력하세요");
		localStorage.setItem("nickName", nickName);
	}
	
	var socket;
	socket = io4azki.connect("/tank");
	socket.on("connect", function() {
		var roomNum = prompt("방 이름을 입력하세요");
		socket.emit("join", {
			clientUniq: clientUniq,
			nickName: nickName,
			roomNum: roomNum
		});
		//TODO send power , angle
	});
	socket.on("disconnect", function() {
		console.log("disconnect");
	});
	socket.on("okRoom", function (roomNum) {
		$("#status").html(roomNum + "방에 입장했어요!");
	});
});
		</script>
	</body>
</html>